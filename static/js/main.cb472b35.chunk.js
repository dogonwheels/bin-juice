(this["webpackJsonpbin-juice"]=this["webpackJsonpbin-juice"]||[]).push([[0],{12:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n(1),i=n.n(r),s=n(13),l=n.n(s),o=(n(19),n(3)),u=n(8),j=n.n(u),b=n(9),d=n(7),h=n(2),O=n(10);!function(e){e.Text="Text",e.Hex="Hex",e.Pixel="Pixel"}(c||(c={}));var v=c;function p(e,t){return e.toString(2).padStart(t,"0")}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0x";return n+e.toString(16).padStart(t,"0")}n(12);var g,x=function(e){var t=e.type,n=e.start,c=e.length,i=e.top,s=e.height,l=e.visibleStart,u=e.visibleEnd,j=e.cursor,b=e.onUpdateCursor,d=e.onUpdateLength,h=e.onUpdateType,p=e.onMergeBlock,g=e.contentsComponent,x=Object(O.a)(e,["type","start","length","top","height","visibleStart","visibleEnd","cursor","onUpdateCursor","onUpdateLength","onUpdateType","onMergeBlock","contentsComponent"]),m=Object(r.useCallback)((function(e){var t=parseInt(e.target.value,10);t&&d(n,t)}),[n,d]),y=Object(r.useCallback)((function(e){var t=e.target.value;h(n,t)}),[h,n]),k=Object(r.useCallback)((function(){b(n)}),[n,b]),C=Object(r.useCallback)((function(){p(n)}),[n,p]),N=Object.values(v),B=g,w=j>=n&&j<n+c,L=Object(r.useMemo)((function(){return{top:i,height:s}}),[i,s]);return i>u||i+s<l?null:Object(a.jsxs)("div",{className:"Block".concat(w?" Selected":""),style:L,onClick:k,children:[Object(a.jsx)("div",{className:"BlockAddress",children:f(n,16)}),Object(a.jsxs)("div",{className:"BlockActions",children:[Object(a.jsx)("select",{value:t,onChange:y,children:N.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))}),n?Object(a.jsx)("button",{onClick:C,children:"Merge"}):null]}),Object(a.jsx)("div",{className:"BlockContents",children:Object(a.jsx)(B,Object(o.a)({start:n,length:c,visibleEnd:u,visibleStart:l,cursor:j,onUpdateCursor:b},x))}),Object(a.jsx)("div",{className:"BlockOptions",children:Object(a.jsx)("div",{className:"BlockOptionsOverflow",children:w?Object(a.jsx)("div",{className:"BlockOptionList",children:Object(a.jsx)("div",{children:Object(a.jsx)("input",{value:c,onChange:m})})}):null})})]})};!function(e){e[e.Byte=0]="Byte",e[e.Word=1]="Word",e[e.Dword=2]="Dword"}(g||(g={}));var m,y=g,k=(m={},Object(h.a)(m,y.Byte,1),Object(h.a)(m,y.Word,2),Object(h.a)(m,y.Dword,4),m);var C,N,B=function(e){for(var t=e.data,n=e.start,c=e.length,i=e.cursor,s=e.bitLength,l=e.cellFormatter,o=e.className,u=e.onUpdateCursor,j=[],b=Object(r.useCallback)((function(e){var t=parseInt(e.target.dataset.position,10);u(t),e.stopPropagation()}),[u]),d=k[s],h=Math.min(n+c,t.byteLength-4),O=n;O<h;O+=d){var v=i===O,p=t.getUint8(O);s===y.Word?p=t.getUint16(O):s===y.Dword&&(p=t.getUint32(O)),j.push(Object(a.jsx)("span",{onClick:b,className:"Cell".concat(v?" Selected":""),"data-position":O,children:l(O,p)},O))}return Object(a.jsx)("div",{className:"Row ".concat(null!==o&&void 0!==o?o:""),children:j})},w=function(e){for(var t=e.start,n=e.length,c=e.cursor,r=e.columns,i=Object(O.a)(e,["start","length","cursor","columns"]),s=[],l=0;l<Math.ceil(n/r);l++){var u=t+l*r,j=Math.min(t+n,u+r)-u;s.push(Object(a.jsx)(B,Object(o.a)({start:u,length:j,cursor:c,columns:r},i),l))}return Object(a.jsx)("div",{children:s})},L=function(e){var t=Object(r.useCallback)((function(e,t){return f(t,2,"")}),[]);return Object(a.jsx)(w,Object(o.a)({bitLength:y.Byte,cellFormatter:t},e))},S=function(e){var t=Object(r.useCallback)((function(e,t){var n={background:f(t,8,"#"),width:6,height:6};return Object(a.jsx)("div",{style:n,"data-position":e})}),[]);return Object(a.jsx)(w,Object(o.a)({className:"Pixel",bitLength:y.Dword,cellFormatter:t},e))},U=function(e){var t=Object(r.useCallback)((function(e,t){return String.fromCharCode(t).replace(/[^ -~]+/g,".")}),[]);return Object(a.jsx)(w,Object(o.a)({className:"Text",bitLength:y.Byte,cellFormatter:t},e))},D=function(e){var t=e.className,n=e.data,c=e.cursor,r=e.onSplitBlock,i=n.getUint8(c),s=c+1<n.byteLength?n.getUint16(c):i,l=c+3<n.byteLength?n.getUint32(c):i,o=c+1<n.byteLength?n.getUint16(c,!0):i,u=c+3<n.byteLength?n.getUint32(c,!0):i;return Object(a.jsxs)("div",{className:t,children:[Object(a.jsx)("div",{className:"InspectorTitle",children:f(c,16)}),Object(a.jsx)("button",{onClick:r,children:"Split"}),Object(a.jsxs)("div",{className:"InspectorRow",children:[Object(a.jsx)("div",{className:"InspectorHeader",children:"Binary"}),Object(a.jsx)("div",{children:p(i,8)}),Object(a.jsx)("div",{className:"InspectorType",children:"Big-endian"}),Object(a.jsx)("div",{children:p(s,16)}),Object(a.jsx)("div",{children:p(l,32)}),Object(a.jsx)("div",{className:"InspectorType",children:"Little-endian"}),Object(a.jsx)("div",{children:p(o,16)}),Object(a.jsx)("div",{children:p(u,32)})]}),Object(a.jsxs)("div",{className:"InspectorRow",children:[Object(a.jsx)("div",{className:"InspectorHeader",children:"Hex"}),Object(a.jsx)("div",{children:f(i,2)}),Object(a.jsx)("div",{className:"InspectorType",children:"Big-endian"}),Object(a.jsx)("div",{children:f(s,4)}),Object(a.jsx)("div",{children:f(l,8)}),Object(a.jsx)("div",{className:"InspectorType",children:"Little-endian"}),Object(a.jsx)("div",{children:f(o,4)}),Object(a.jsx)("div",{children:f(u,8)})]})]})},I=function(e){var t=e.onUpdateData,n="Drag File Here",c=Object(r.useState)(n),i=Object(d.a)(c,2),s=i[0],l=i[1],o=Object(r.useCallback)((function(e){var c,a,r=null===(c=e.dataTransfer)||void 0===c||null===(a=c.files)||void 0===a?void 0:a[0];function i(){return(i=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,r.arrayBuffer();case 3:n=e.sent,t(new DataView(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.preventDefault(),function(){i.apply(this,arguments)}(),l(n)}),[t]),u=Object(r.useCallback)((function(e){l("Drop!"),e.preventDefault()}),[]),h=Object(r.useCallback)((function(e){l(n)}),[]);return Object(a.jsxs)("div",{className:"DropArea",onDrop:o,onDragOver:u,onDragLeave:h,children:[Object(a.jsx)("h1",{children:s}),";"]})},T=n(4),H=n(6),M=n(5),F=function(e){Object(H.a)(n,e);var t=Object(M.a)(n);function n(e,c,a){var r;return Object(T.a)(this,n),(r=t.call(this,e)).rowHeight=void 0,r.getHeight=function(){return Math.ceil(r.length/r.columns)*r.rowHeight},r.columns=c,r.rowHeight=a,r}return n}((function e(t){Object(T.a)(this,e),this.columns=1,this.length=void 0,this.getHeight=void 0,this.length=t})),P=function(e){Object(H.a)(n,e);var t=Object(M.a)(n);function n(e){return Object(T.a)(this,n),t.call(this,e,16,32)}return n}(F),E=function(e){Object(H.a)(n,e);var t=Object(M.a)(n);function n(e){return Object(T.a)(this,n),t.call(this,e,32,32)}return n}(F),A=function(e){Object(H.a)(n,e);var t=Object(M.a)(n);function n(e){return Object(T.a)(this,n),t.call(this,e,256,8)}return n}(F),R=(C={},Object(h.a)(C,v.Hex,P),Object(h.a)(C,v.Text,E),Object(h.a)(C,v.Pixel,A),C),W=(n(21),N={},Object(h.a)(N,v.Hex,L),Object(h.a)(N,v.Text,U),Object(h.a)(N,v.Pixel,S),N);var J=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)([]),s=Object(d.a)(i,2),l=s[0],u=s[1],h=Object(r.useState)(0),O=Object(d.a)(h,2),p=O[0],f=O[1],g=Object(r.useRef)(null),m=Object(r.useState)(0),y=Object(d.a)(m,2),k=y[0],C=y[1],N=Object(r.useState)(0),B=Object(d.a)(N,2),w=B[0],L=B[1];Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var t,n,a,r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("CT-MONO2-16-brain.dcm");case 2:return t=e.sent,e.next=5,t.blob();case 5:return n=e.sent,e.next=8,n.arrayBuffer();case 8:for(a=e.sent,c(new DataView(a)),1024,r=[],i=0;i<a.byteLength;i+=1024)s=Math.min(1024,a.byteLength-i),r.push({type:v.Hex,length:s});u(r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var S=Object(r.useMemo)((function(){var e=[],t=0,c=0;return n&&l.forEach((function(a){var r=a.type,i=a.length,s=t,l=Math.min(t+i,n.byteLength),o=new R[r](i),u=o.getHeight();s<n.byteLength&&e.push({type:r,start:s,end:l,length:l-s,top:c,height:u,layout:o}),t+=i,c+=u})),e}),[l,n]),U=Object(r.useMemo)((function(){var e=S[S.length-1];return{height:e?e.top+e.height:0}}),[S]),T=Object(r.useCallback)((function(){var e,t,n,c,a=null!==(e=null===(t=g.current)||void 0===t?void 0:t.scrollTop)&&void 0!==e?e:0,r=null!==(n=null===(c=g.current)||void 0===c?void 0:c.offsetHeight)&&void 0!==n?n:0;C(a),L(a+r)}),[]);Object(r.useLayoutEffect)((function(){n&&T()}),[n,T]);var H=Object(r.useCallback)((function(e,t){var n=S.findIndex((function(t){return t.start===e}));if(-1!==n){var c=l.slice();c[n].type=t,u(c)}}),[l,S]),M=Object(r.useCallback)((function(e,t){var n=S.findIndex((function(t){return t.start===e}));if(-1!==n){var c=l.slice();c[n].length=t,u(c)}}),[l,S]),F=Object(r.useCallback)((function(e){var t=S.findIndex((function(t){return t.start===e}));if(!(t<1)){var n=l.slice();n.splice(t,1),n[t-1].length+=l[t].length,u(n)}}),[l,S]),P=Object(r.useCallback)((function(){var e=S.findIndex((function(e){return p>=e.start&&p<e.end}));if(-1!==e){var t=S[e];if(p!==t.start){var n=l.slice(),c=p-t.start;n[e].length=c;var a=Object(o.a)(Object(o.a)({},l[e]),{},{length:t.length-c});n.splice(e+1,0,a),u(n)}}}),[l,S,p]);return n?Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{className:"Blocks",onScroll:T,ref:g,children:Object(a.jsx)("div",{className:"Scroller",style:U,children:S.map((function(e){var t=e.type,c=e.start,r=e.length,i=e.top,s=e.height,l=e.layout;return Object(a.jsx)(x,{type:t,data:n,start:c,length:r,visibleStart:k,visibleEnd:w,top:i,height:s,columns:l.columns,cursor:p,contentsComponent:W[t],onUpdateCursor:f,onUpdateLength:M,onUpdateType:H,onMergeBlock:F},c)}))})}),Object(a.jsxs)("div",{className:"Panel",children:[Object(a.jsx)(D,{className:"Inspector",data:n,cursor:p,onSplitBlock:P}),Object(a.jsx)(I,{onUpdateData:c})]})]}):Object(a.jsx)("h1",{children:"Loading"})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),V()}},[[22,1,2]]]);
//# sourceMappingURL=main.cb472b35.chunk.js.map