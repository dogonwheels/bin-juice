{"version":3,"sources":["BlockType.ts","formatters.ts","Block.tsx","BitLength.ts","Row.tsx","Rows.tsx","HexBlock.tsx","PixelBlock.tsx","Pixel16Block.tsx","TextBlock.tsx","Inspector.tsx","DropArea.tsx","RowLayout.ts","Layout.ts","HexLayout.ts","TextLayout.ts","PixelLayout.ts","layoutsForType.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["BlockType","formatBinary","value","length","toString","padStart","formatHex","prefix","Block","BitLength","currentType","type","start","top","height","visibleStart","visibleEnd","cursor","onUpdateCursor","onUpdateLength","onUpdateType","onMergeBlock","contentsComponent","props","onLengthChange","useCallback","e","newLength","parseInt","target","onTypeChange","onBlockSelect","onMergeClick","types","Object","values","Component","isSelected","blockLayoutStyle","useMemo","className","style","onClick","onChange","map","steps","Byte","Word","Dword","Row","data","bitLength","cellFormatter","result","onCellClick","position","dataset","stopPropagation","step","end","Math","min","byteLength","getUint8","getUint16","getUint32","push","data-position","Rows","columns","rows","row","ceil","rowStart","rowLength","HexBlock","formatter","PixelBlock","background","width","Pixel16Block","grayscale","TextBlock","String","fromCharCode","replace","Inspector","onSplitBlock","useState","little","setLittle","byte","toggleLittle","word","dword","checked","DropArea","onUpdateData","defaultText","label","setLabel","onDrop","item","dataTransfer","files","a","arrayBuffer","buffer","DataView","preventDefault","readFile","onDragOver","onDragLeave","RowLayout","rowHeight","getHeight","this","HexLayout","TextLayout","PixelLayout","layoutsForType","Hex","Text","Pixel","Pixel16","componentsForType","App","setData","blocks","setBlocks","setCursor","scroller","useRef","setVisibleStart","setVisibleEnd","useEffect","fetch","response","blob","array","createFile","blockLayout","forEach","layout","scrollerStyle","lastBlock","onUpdateScroll","current","scrollTop","visibleHeight","offsetHeight","useLayoutEffect","index","findIndex","block","newBlocks","slice","splice","oldLayoutBlock","partition","newBlock","onScroll","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.64ae2412.chunk.js","sourcesContent":["enum BlockType {\n  Text = 'Text',\n  Hex = 'Hex',\n  Pixel = 'Pixel',\n  Pixel16 = 'Grayscale',\n}\n\nexport default BlockType;\n","export function formatBinary(value: number, length: number) {\n  return value.toString(2).padStart(length, '0');\n}\n\nexport function formatHex(value: number, length: number, prefix: string = '0x') {\n  return prefix + value.toString(16).padStart(length, '0');\n}\n","import React, { FunctionComponent, useCallback, useMemo } from 'react';\nimport BlockType from './BlockType';\nimport { formatHex } from './formatters';\nimport ViewProps from './ViewProps';\nimport './Block.css';\n\ninterface BlockProps extends ViewProps {\n  type: BlockType;\n  top: number;\n  height: number;\n  onUpdateLength: (start: number, length: number) => void;\n  onUpdateType: (start: number, type: BlockType) => void;\n  onMergeBlock: (start: number) => void;\n  contentsComponent: FunctionComponent<ViewProps>;\n}\n\nfunction Block({\n  type: currentType,\n  start,\n  length,\n  top,\n  height,\n  visibleStart,\n  visibleEnd,\n  cursor,\n  onUpdateCursor,\n  onUpdateLength,\n  onUpdateType,\n  onMergeBlock,\n  contentsComponent,\n  ...props\n}: BlockProps) {\n  const onLengthChange = useCallback(\n    (e) => {\n      const newLength = parseInt(e.target.value, 10);\n      if (newLength) {\n        onUpdateLength(start, newLength);\n      }\n    },\n    [start, onUpdateLength],\n  );\n\n  const onTypeChange = useCallback(\n    (e) => {\n      const type = e.target.value;\n      onUpdateType(start, type);\n    },\n    [onUpdateType, start],\n  );\n\n  const onBlockSelect = useCallback(() => {\n    onUpdateCursor(start);\n  }, [start, onUpdateCursor]);\n\n  const onMergeClick = useCallback(() => {\n    onMergeBlock(start);\n  }, [start, onMergeBlock]);\n\n  const types = Object.values(BlockType);\n  const Component = contentsComponent;\n  const isSelected = cursor >= start && cursor < start + length;\n\n  const blockLayoutStyle = useMemo(\n    () => ({\n      top,\n      height,\n    }),\n    [top, height],\n  );\n\n  if (top > visibleEnd || top + height < visibleStart) {\n    return null;\n  }\n\n  return (\n    <div className={`Block${isSelected ? ' Selected' : ''}`} style={blockLayoutStyle} onClick={onBlockSelect}>\n      <div className=\"BlockAddress\">{formatHex(start, 16)}</div>\n      <div className=\"BlockActions\">\n        <select value={currentType} onChange={onTypeChange}>\n          {types.map((type) => (\n            <option key={type} value={type}>\n              {type}\n            </option>\n          ))}\n        </select>\n        {start ? <button onClick={onMergeClick}>Merge</button> : null}\n      </div>\n      <div className=\"BlockContents\">\n        <Component\n          start={start}\n          length={length}\n          visibleEnd={visibleEnd}\n          visibleStart={visibleStart}\n          cursor={cursor}\n          onUpdateCursor={onUpdateCursor}\n          {...props}\n        />\n      </div>\n      <div className=\"BlockOptions\">\n        <div className=\"BlockOptionsOverflow\">\n          {isSelected ? (\n            <div className=\"BlockOptionList\">\n              <div>\n                <input value={length} onChange={onLengthChange} />\n              </div>\n            </div>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Block;\n","enum BitLength {\n  Byte,\n  Word,\n  Dword,\n}\n\nexport default BitLength;\n","import React, { ReactElement, ReactNode, useCallback } from 'react';\nimport BitLength from './BitLength';\nimport ViewProps from './ViewProps';\n\nconst steps = {\n  [BitLength.Byte]: 1,\n  [BitLength.Word]: 2,\n  [BitLength.Dword]: 4,\n};\n\nexport interface RowProps extends ViewProps {\n  className?: string;\n  bitLength: BitLength;\n  cellFormatter: (position: number, value: number) => ReactNode;\n}\n\nfunction Row({ data, start, length, cursor, bitLength, cellFormatter, className, onUpdateCursor }: RowProps) {\n  const result: ReactElement[] = [];\n\n  const onCellClick = useCallback(\n    (e) => {\n      const position = parseInt(e.target.dataset.position, 10);\n      onUpdateCursor(position);\n      e.stopPropagation();\n    },\n    [onUpdateCursor],\n  );\n\n  const step = steps[bitLength];\n\n  const end = Math.min(start + length, data.byteLength - 4);\n  for (let position = start; position < end; position += step) {\n    const isSelected = cursor === position;\n    let value = data.getUint8(position);\n    if (bitLength === BitLength.Word) {\n      value = data.getUint16(position);\n    } else if (bitLength === BitLength.Dword) {\n      value = data.getUint32(position);\n    }\n\n    result.push(\n      <span\n        onClick={onCellClick}\n        className={`Cell${isSelected ? ' Selected' : ''}`}\n        key={position}\n        data-position={position}\n      >\n        {cellFormatter(position, value)}\n      </span>,\n    );\n  }\n  return <div className={`Row ${className ?? ''}`}>{result}</div>;\n}\n\nexport default Row;\n","import React, { FunctionComponent, ReactElement } from 'react';\nimport './Block.css';\nimport Row, { RowProps } from './Row';\n\ninterface RowsProps extends RowProps {\n  className?: string;\n}\n\nconst Rows: FunctionComponent<RowsProps> = ({ start, length, cursor, columns, ...props }) => {\n  const rows: ReactElement[] = [];\n  for (let row = 0; row < Math.ceil(length / columns); row++) {\n    const rowStart = start + row * columns;\n    const rowEnd = Math.min(start + length, rowStart + columns);\n    const rowLength = rowEnd - rowStart;\n    rows.push(<Row key={row} start={rowStart} length={rowLength} cursor={cursor} columns={columns} {...props} />);\n  }\n\n  return <div>{rows}</div>;\n};\n\nexport default Rows;\n","import React, { FunctionComponent, useCallback } from 'react';\nimport BitLength from './BitLength';\nimport { formatHex } from './formatters';\nimport Rows from './Rows';\nimport ViewProps from './ViewProps';\nimport './Block.css';\n\nconst HexBlock: FunctionComponent<ViewProps> = (props) => {\n  const formatter = useCallback((position, value) => formatHex(value, 2, ''), []);\n\n  return <Rows bitLength={BitLength.Byte} cellFormatter={formatter} {...props} />;\n};\n\nexport default HexBlock;\n","import React, { FunctionComponent, useCallback } from 'react';\nimport BitLength from './BitLength';\nimport { formatHex } from './formatters';\nimport Rows from './Rows';\nimport ViewProps from './ViewProps';\n\nconst PixelBlock: FunctionComponent<ViewProps> = (props) => {\n  const formatter = useCallback((position, value) => {\n    const style = {\n      background: formatHex(value, 8, '#'),\n      width: 6,\n      height: 6,\n    };\n    return <div style={style} data-position={position} />;\n  }, []);\n\n  return <Rows className=\"Pixel\" bitLength={BitLength.Dword} cellFormatter={formatter} {...props} />;\n};\n\nexport default PixelBlock;\n","import React, { FunctionComponent, useCallback } from 'react';\nimport BitLength from './BitLength';\nimport { formatHex } from './formatters';\nimport Rows from './Rows';\nimport ViewProps from './ViewProps';\n\nconst Pixel16Block: FunctionComponent<ViewProps> = (props) => {\n  const formatter = useCallback((position, value) => {\n    const grayscale = (value / 4) % 256;\n    const style = {\n      background: `rgb(${grayscale}, ${grayscale}, ${grayscale})`,\n      width: 6,\n      height: 6,\n    };\n    return <div style={style} data-position={position} />;\n  }, []);\n\n  return <Rows className=\"Pixel\" bitLength={BitLength.Word} cellFormatter={formatter} {...props} />;\n};\n\nexport default Pixel16Block;\n","import React, { FunctionComponent, useCallback } from 'react';\nimport BitLength from './BitLength';\nimport Rows from './Rows';\nimport ViewProps from './ViewProps';\n\nconst TextBlock: FunctionComponent<ViewProps> = (props) => {\n  const formatter = useCallback((position, value) => String.fromCharCode(value).replace(/[^ -~]+/g, '.'), []);\n\n  return <Rows className=\"Text\" bitLength={BitLength.Byte} cellFormatter={formatter} {...props} />;\n};\n\nexport default TextBlock;\n","import React, { FunctionComponent, useCallback, useState } from 'react';\nimport { formatBinary, formatHex } from './formatters';\nimport './Inspector.css';\n\ninterface InspectorProps {\n  className: string;\n  data: DataView;\n  cursor: number;\n  onSplitBlock: () => void;\n}\n\nconst Inspector: FunctionComponent<InspectorProps> = ({ className, data, cursor, onSplitBlock }) => {\n  const [little, setLittle] = useState(false);\n\n  const byte = data.getUint8(cursor);\n\n  const toggleLittle = useCallback(() => {\n    setLittle(!little);\n  }, [little]);\n\n  const word = cursor + 1 < data.byteLength ? data.getUint16(cursor, little) : byte;\n  const dword = cursor + 3 < data.byteLength ? data.getUint32(cursor, little) : byte;\n\n  return (\n    <div className={className}>\n      <div className=\"InspectorTitle\">{formatHex(cursor, 16)}</div>\n      <button onClick={onSplitBlock}>Split</button>\n      <div>\n        <input type=\"checkbox\" checked={little} onChange={toggleLittle} />\n        Little Endian\n      </div>\n      <div className=\"InspectorRow\">\n        <div className=\"InspectorHeader\">Binary</div>\n        <div>{formatBinary(byte, 8)}</div>\n        <div>{formatBinary(word, 16)}</div>\n        <div>{formatBinary(dword, 32)}</div>\n      </div>\n      <div className=\"InspectorRow\">\n        <div className=\"InspectorHeader\">Hex</div>\n        <div>{formatHex(byte, 2)}</div>\n        <div>{formatHex(word, 4)}</div>\n        <div>{formatHex(dword, 8)}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default Inspector;\n","import { useCallback, useState } from 'react';\n\ninterface DropAreaProps {\n  onUpdateData: (data: DataView) => void;\n}\nconst DropArea = ({ onUpdateData }: DropAreaProps) => {\n  const defaultText = 'Drag File Here';\n  const [label, setLabel] = useState(defaultText);\n\n  const onDrop = useCallback(\n    (e) => {\n      const item = e.dataTransfer?.files?.[0];\n      e.preventDefault();\n\n      async function readFile() {\n        if (item) {\n          const buffer = await item.arrayBuffer();\n          onUpdateData(new DataView(buffer));\n        }\n      }\n\n      readFile();\n      setLabel(defaultText);\n    },\n    [onUpdateData],\n  );\n\n  const onDragOver = useCallback((e) => {\n    setLabel('Drop!');\n    e.preventDefault();\n  }, []);\n\n  const onDragLeave = useCallback((e) => {\n    setLabel(defaultText);\n  }, []);\n\n  return (\n    <div className=\"DropArea\" onDrop={onDrop} onDragOver={onDragOver} onDragLeave={onDragLeave}>\n      <h1>{label}</h1>;\n    </div>\n  );\n};\n\nexport default DropArea;\n","import Layout from './Layout';\n\nexport default class RowLayout extends Layout {\n  rowHeight: number;\n\n  constructor(length: number, columns: number, rowHeight: number) {\n    super(length);\n    this.columns = columns;\n    this.rowHeight = rowHeight;\n  }\n\n  getHeight = () => Math.ceil(this.length / this.columns) * this.rowHeight;\n}\n","export default abstract class Layout {\n  columns = 1;\n  length: number;\n\n  constructor(length: number) {\n    this.length = length;\n  }\n\n  abstract getHeight: () => number;\n}\n","import RowLayout from './RowLayout';\n\nexport default class HexLayout extends RowLayout {\n  constructor(length: number) {\n    super(length, 16, 32);\n  }\n}\n","import RowLayout from './RowLayout';\n\nexport default class TextLayout extends RowLayout {\n  constructor(length: number) {\n    super(length, 32, 32);\n  }\n}\n","import RowLayout from './RowLayout';\n\nexport default class PixelLayout extends RowLayout {\n  constructor(length: number) {\n    super(length, 256, 8);\n  }\n}\n","import BlockType from './BlockType';\nimport HexLayout from './HexLayout';\nimport TextLayout from './TextLayout';\nimport PixelLayout from './PixelLayout';\n\nconst layoutsForType = {\n  [BlockType.Hex]: HexLayout,\n  [BlockType.Text]: TextLayout,\n  [BlockType.Pixel]: PixelLayout,\n  [BlockType.Pixel16]: PixelLayout,\n};\n\nexport default layoutsForType;\n","import React, { FunctionComponent, useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport Block from './Block';\nimport BlockType from './BlockType';\nimport HexBlock from './HexBlock';\nimport PixelBlock from './PixelBlock';\nimport Pixel16Block from './Pixel16Block';\nimport TextBlock from './TextBlock';\nimport Inspector from './Inspector';\nimport DropArea from './DropArea';\nimport Layout from './Layout';\nimport layoutsForType from './layoutsForType';\nimport ViewProps from './ViewProps';\nimport './App.css';\n\nconst componentsForType: { [blockType: string]: FunctionComponent<ViewProps> } = {\n  [BlockType.Hex]: HexBlock,\n  [BlockType.Text]: TextBlock,\n  [BlockType.Pixel]: PixelBlock,\n  [BlockType.Pixel16]: Pixel16Block,\n};\n\ninterface BlockDefinition {\n  type: BlockType;\n  length: number;\n}\n\ninterface BlockLayout {\n  type: BlockType;\n  start: number;\n  end: number;\n  length: number;\n  top: number;\n  height: number;\n  layout: Layout;\n}\n\nfunction App() {\n  const [data, setData] = useState<DataView>();\n  const [blocks, setBlocks] = useState<BlockDefinition[]>([]);\n  const [cursor, setCursor] = useState(0);\n\n  const scroller = useRef<HTMLDivElement>(null);\n  const [visibleStart, setVisibleStart] = useState(0);\n  const [visibleEnd, setVisibleEnd] = useState(0);\n\n  useEffect(() => {\n    async function createFile() {\n      let response = await fetch('CT-MONO2-16-brain.dcm');\n      let data = await response.blob();\n      let array = await data.arrayBuffer();\n      setData(new DataView(array));\n    }\n    createFile();\n  }, []);\n\n  useEffect(() => {\n    if (!data) {\n      return;\n    }\n    const blockSize = 1024;\n    const blocks = [];\n    for (let position = 0; position < data.byteLength; position += blockSize) {\n      const length = Math.min(blockSize, data.byteLength - position);\n      blocks.push({ type: BlockType.Hex, length });\n    }\n    setBlocks(blocks);\n  }, [data]);\n\n  // Cache more detail about the layout\n  const blockLayout = useMemo(() => {\n    const result: BlockLayout[] = [];\n    let position = 0;\n    let top = 0;\n\n    if (data) {\n      blocks.forEach(({ type, length }) => {\n        const start = position;\n        const end = Math.min(position + length, data.byteLength);\n\n        const layout = new layoutsForType[type](length);\n        const height = layout.getHeight();\n\n        // Only add the block if it covers data\n        if (start < data.byteLength) {\n          result.push({\n            type,\n            start,\n            end,\n            length: end - start,\n            top,\n            height,\n            layout,\n          });\n        }\n\n        position += length;\n        top += height;\n      });\n    }\n\n    return result;\n  }, [blocks, data]);\n\n  const scrollerStyle = useMemo(() => {\n    const lastBlock = blockLayout[blockLayout.length - 1];\n\n    return {\n      height: lastBlock ? lastBlock.top + lastBlock.height : 0,\n    };\n  }, [blockLayout]);\n\n  const onUpdateScroll = useCallback(() => {\n    const visibleStart = scroller.current?.scrollTop ?? 0;\n    const visibleHeight = scroller.current?.offsetHeight ?? 0;\n    setVisibleStart(visibleStart);\n    setVisibleEnd(visibleStart + visibleHeight);\n  }, []);\n\n  useLayoutEffect(() => {\n    if (data) {\n      onUpdateScroll();\n    }\n  }, [data, onUpdateScroll]);\n\n  const onUpdateType = useCallback(\n    (start, type) => {\n      const index = blockLayout.findIndex((block) => block.start === start);\n      if (index === -1) {\n        return;\n      }\n\n      const newBlocks = blocks.slice();\n      newBlocks[index].type = type;\n\n      setBlocks(newBlocks);\n    },\n    [blocks, blockLayout],\n  );\n\n  const onUpdateLength = useCallback(\n    (start, length) => {\n      const index = blockLayout.findIndex((block) => block.start === start);\n      if (index === -1) {\n        return;\n      }\n\n      const newBlocks = blocks.slice();\n      newBlocks[index].length = length;\n\n      setBlocks(newBlocks);\n    },\n    [blocks, blockLayout],\n  );\n\n  const onMergeBlock = useCallback(\n    (start) => {\n      const index = blockLayout.findIndex((block) => block.start === start);\n\n      // Can't delete the first block\n      if (index < 1) {\n        return;\n      }\n\n      // Remove the block and add its length to the previous one\n      const newBlocks = blocks.slice();\n      newBlocks.splice(index, 1);\n      newBlocks[index - 1].length += blocks[index].length;\n\n      setBlocks(newBlocks);\n    },\n    [blocks, blockLayout],\n  );\n\n  const onSplitBlock = useCallback(() => {\n    const index = blockLayout.findIndex((block) => cursor >= block.start && cursor < block.end);\n    if (index === -1) {\n      return;\n    }\n\n    // Can't split at the first cell\n    const oldLayoutBlock = blockLayout[index];\n    if (cursor === oldLayoutBlock.start) {\n      return;\n    }\n\n    const newBlocks = blocks.slice();\n    const partition = cursor - oldLayoutBlock.start;\n\n    newBlocks[index].length = partition;\n    const newBlock = {\n      ...blocks[index],\n      length: oldLayoutBlock.length - partition,\n    };\n\n    newBlocks.splice(index + 1, 0, newBlock);\n\n    setBlocks(newBlocks);\n  }, [blocks, blockLayout, cursor]);\n\n  return data ? (\n    <div className=\"App\">\n      <div className=\"Blocks\" onScroll={onUpdateScroll} ref={scroller}>\n        <div className=\"Scroller\" style={scrollerStyle}>\n          {blockLayout.map(({ type, start, length, top, height, layout }) => (\n            <Block\n              key={start}\n              type={type}\n              data={data}\n              start={start}\n              length={length}\n              visibleStart={visibleStart}\n              visibleEnd={visibleEnd}\n              top={top}\n              height={height}\n              columns={layout.columns}\n              cursor={cursor}\n              contentsComponent={componentsForType[type]}\n              onUpdateCursor={setCursor}\n              onUpdateLength={onUpdateLength}\n              onUpdateType={onUpdateType}\n              onMergeBlock={onMergeBlock}\n            />\n          ))}\n        </div>\n      </div>\n      <div className=\"Panel\">\n        <Inspector className=\"Inspector\" data={data} cursor={cursor} onSplitBlock={onSplitBlock} />\n        <DropArea onUpdateData={setData} />\n      </div>\n    </div>\n  ) : (\n    <h1>Loading</h1>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}